vault:
  injector:
    enabled: true
    resources:
      requests:
        memory: 60Mi
        cpu: 80m
      limits:
        memory: 120Mi
        cpu: 120m
    tolerations:
      - effect: "NoSchedule"
        key: xquare/platform
        operator: "Equal"
        value: "true"
    affinity: |
  server:
    enabled: true
    resources:
      requests:
        memory: 200Mi
        cpu: 100m
    tolerations:
      - effect: "NoSchedule"
        key: xquare/critical_platform
        operator: "Equal"
        value: "true"
    affinity: |
    dataStorage:
      enabled: false
    volumes:
      - name: vault-storage
        persistentVolumeClaim:
          claimName: vault-pvc
    volumeMounts:
      - mountPath: "/vault/data"
        name: vault-storage

    extraEnvironmentVars:
      VAULT_SEAL_TYPE: awskms
      AWS_REGION: ap-northeast-2
      VAULT_AWSKMS_SEAL_KEY_ID: alias/vault-auto-unseal-key

    extraArgs: "-config=/vault/config/seal.hcl"

    serviceAccount:
      annotations:
        eks.amazonaws.com/role-arn: "<path:avp/data/aws/vault-kms#role_arn>"

    extraVolumes:
      - type: configMap
        name: vault-seal-config
        path: /vault/config

  pod:
    affinity: |
    tolerations:
      - effect: "NoSchedule"
        key: xquare/platform
        operator: "Equal"
        value: "true"
  ui:
    affinity: |
    enabled: true
    serviceType: "ClusterIP"
    externalPort: 8200
