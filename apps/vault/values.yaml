vault:
  injector:
    enabled: true
    resources:
      requests:
        memory: 60Mi
        cpu: 80m
      limits:
        memory: 120Mi
        cpu: 120m
    tolerations:
      - effect: "NoSchedule"
        key: xquare/platform
        operator: "Equal"
        value: "true"
    affinity: |
  server:
    enabled: true
    resources:
      requests:
        memory: 200Mi
        cpu: 100m
    tolerations:
      - effect: "NoSchedule"
        key: xquare/critical_platform
        operator: "Equal"
        value: "true"
    affinity: |

    dataStorage:
      enabled: false
    volumes:
      - name: vault-storage
        persistentVolumeClaim:
          claimName: vault-pvc
      - name: userconfig-vault-seal-config
        secret:
          defaultMode: 420
          secretName: vault-seal-config
    volumeMounts:
      - mountPath: "/vault/data"
        name: vault-storage
      - mountPath: /vault/userconfig/vault-seal-config
        name: userconfig-vault-seal-config
        readOnly: true

    extraEnvironmentVars:
      VAULT_SEAL_TYPE: awskms
      AWS_REGION: ap-northeast-2
      VAULT_AWSKMS_SEAL_KEY_ID: alias/vault-auto-unseal-key

    extraVolumes:
      - type: configMap
        name: vault-seal-config
        path: /vault/config

    extraArgs: "-config=/vault/userconfig/vault-seal-config/config.hcl"

    serviceAccount:
      create: true
      annotations:
        eks.amazonaws.com/role-arn: "arn:aws:iam::786584124104:role/vault-kms-role"

    standalone:
      enabled: true

  pod:
    affinity: |
    tolerations:
      - effect: "NoSchedule"
        key: xquare/platform
        operator: "Equal"
        value: "true"
  ui:
    affinity: |
    enabled: true
    serviceType: "ClusterIP"
    externalPort: 8200
